!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.multitabstorage=t():e.multitabstorage=t()}(self,(()=>(()=>{"use strict";var e={d:(t,a)=>{for(var r in a)e.o(a,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:a[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>n});const a=class{constructor(){if(a.instance)return a.instance;a.instance=this,this._data={}}setItem(e,t){this._data[e]=t,a.dataSendHandler(this._data)}getItem(e){return this._data[e]}removeItem(e){if(void 0===this._data[e])return!1;delete this._data[e],a.dataSendHandler(this._data)}clear(){this._data={},a.dataSendHandler(this._data)}getData(){return this._data}setData(e){this._data=e}mergeToData(e){for(let t in e)this._data[t]=e[t]}static dataSendHandler(e){localStorage.setItem("setMemoryStorage",JSON.stringify(e)),localStorage.removeItem("setMemoryStorage")}static dataGetHandler(){localStorage.setItem("getMemoryStorage",(new Date).getTime()),localStorage.removeItem("getMemoryStorage")}};function r(){var e=new a;return window.addEventListener("storage",(function(t){if(null===t.newValue)return!1;if("getMemoryStorage"==t.key)console.log("有其他页面取memory"),a.dataSendHandler(e.getData());else if("setMemoryStorage"==t.key){let a=JSON.parse(t.newValue);o(a)?(console.log("memory被清空了"),e.setData({})):(console.log("memory被修改了"),e.mergeToData(a))}})),o(e.data)&&a.dataGetHandler(),r=function(){return e},e}function o(e){for(let t in e)return!1;return!0}const n=r;return t.default})()));