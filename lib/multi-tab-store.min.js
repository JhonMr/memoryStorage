!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.multiTabStore=e():t.multiTabStore=e()}(self,(()=>(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>o});const s="_MULTI_STORE_EVENT_GET_STATE_",i="_MULTI_STORE_EVENT_SET_STATE_",n="_MULTI_STORE_EVENT_SET_";class a{constructor(t){return a._instance||(this.initSync=!1,this.initListener(),this.initState(t.state),a._instance=this),a._instance}initState(t){a.getState(),this.state=t}initListener(){window.addEventListener("storage",(t=>{const{newValue:e,key:o}=t;if(null!==e)if(o===s){console.log("被请求state");const t=this.getState();a.sendData(JSON.stringify(t),i)}else if(o===i){if(!this.initSync){this.initSync=!0;const t=JSON.parse(e);this.state=t}}else if(o===n){const{key:t,value:s}=JSON.parse(e);this.state[t]=s}}))}setItem(t,e){this.state[t]=e,a.sendData(JSON.stringify({key:t,value:e}))}getItem(t){return this.state[t]}getState(){return this.state}static sendData(t,e=n){window.localStorage.setItem(e,t),window.localStorage.removeItem(e)}static getState(){window.localStorage.setItem(s,Date.now()+""),window.localStorage.removeItem(s)}}const o=function({state:t={}}={}){return new a({state:t})};return e.default})()));